<html>
	<head>
		<title>MASOS</title>
		<link rel="stylesheet" href="css/main.css">
				<script type="text/javascript"
	src="lib/raphael.js"></script>

	</head>
	<body>
		<div id="testbar"><a class="testbar" href="test/test.html" target="_blank">Run the Tests!</a></div>
		Hello World!
	</body>
	<script type="text/javascript" src="js/SpriteHandler.js"></script>
	<script type="text/javascript" src="js/Agent.js"></script>
    <script type="text/javascript" src="js/AgentHandler.js"></script>
	<script type="text/javascript" src="js/DoBlock.js"></script>
	<script type="text/javascript" src="js/IfBlock.js"></script>
	<script type="text/javascript" src="js/AndBlock.js"></script>
	<script type="text/javascript" src="js/State.js"></script>
<script>
	var sh = new SpriteHandler();
	var a = new AgentHandler(sh, 100,100,10);
	a.agents[0].state.color = "green";
	a.agents[24].state.color = "blue";
	a.draw();

	var ab = new AndBlock();

	var dbRed = new DoBlock();
	dbRed.changeColor("red");
	var dbBlue = new DoBlock();
	dbBlue.changeColor("blue");
	var dbWhite = new DoBlock();
	dbWhite.changeColor("white");
	var dbGreen = new DoBlock();
	dbGreen.changeColor("green");
	var dbNothing = new DoBlock();

	//If green broadcast (turn white to green) and (turn blue to red)
	//If red broadcast turn red

	var ifWhiteTurnToGreenOrIfBlueToRed = new IfBlock();
	var ifBlueTurnToRed = new IfBlock();

	ifWhiteTurnToGreenOrIfBlueToRed.ifColor("white", dbGreen, ifBlueTurnToRed);
	ifBlueTurnToRed.ifColor("blue", dbRed, dbNothing);

	var ifGreenBroadcastChangeToGreenElseCheckIfRed = new IfBlock();
	var ifRedBroadcastChangeToRed = new IfBlock();

	var broadcastChangeWhiteToGreenOrBlueToRed = new DoBlock();
	broadcastChangeWhiteToGreenOrBlueToRed.setBroadcast(ifWhiteTurnToGreenOrIfBlueToRed);

	var broadcastChangeToRed = new DoBlock();
	broadcastChangeToRed.setBroadcast(dbRed);

	ifGreenBroadcastChangeToGreenElseCheckIfRed.ifColor("green", broadcastChangeWhiteToGreenOrBlueToRed, ifRedBroadcastChangeToRed);
	ifRedBroadcastChangeToRed.ifColor("red", broadcastChangeToRed, dbNothing);

	a.setDoBlock(ifGreenBroadcastChangeToGreenElseCheckIfRed);
</script>
<button style="margin-top:200px" onclick="a.step()">Step</button>
		
</html>